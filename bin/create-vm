#!/bin/bash

# Exit on failure
set -e

# ARGS

OS_NAME="ubuntu"
OS_VERSION="jammy"
DISK_SIZE="20G"

TYPE="c1"
MEMORY="8"
CORES="4"
PURPOSE="worker"
NAME="${PURPOSE}-${TYPE}"
TAGS="${PURPOSE},${TYPE},${OS_NAME},${OS_NAME}-${OS_VERSION}"

# START

DISK_FILE=$(/srv/lib/create-boot-disk "${OS_NAME}" "${OS_VERSION}" "${DISK_SIZE}")
/srv/lib/create-proxmox-vm "${MEMORY}" "${CORES}" "${DISK_FILE}" "${NAME}" "${TAGS}"
