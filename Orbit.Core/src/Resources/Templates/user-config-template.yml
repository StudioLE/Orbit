#cloud-config

hostname: ${HOSTNAME}

apt:
  preserve_sources_list: true
package_update: true
package_upgrade: true
package_reboot_if_required: true

groups:
  - docker

users:
  - name: ${SUDO_USER}
    groups: sudo, docker
    shell: /bin/bash
    sudo: ALL=(ALL) NOPASSWD:ALL
    lock_passwd: true
    ssh_authorized_keys: ${SSH_AUTHORIZED_KEYS}
  - name: ${USER}
    shell: /bin/bash
    lock_passwd: true
    ssh_authorized_keys: ${SSH_AUTHORIZED_KEYS}

wireguard:
  interfaces:

write_files:

  - path: /etc/ssh/sshd_config
    append: true
    content: |
      PermitRootLogin no
      PasswordAuthentication no
      Port 22

bootcmd: []

runcmd: []
